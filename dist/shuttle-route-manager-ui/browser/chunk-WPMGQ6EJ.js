import{c as C,h as E}from"./chunk-ACZDZNZZ.js";import{b as L,c as u,d as _,e as F,g as M,i as I,j as G,q as N,s as D}from"./chunk-C3YQDD43.js";import{A as b,Ba as m,Ga as h,Ka as p,Kb as S,Pb as k,Ra as d,Sa as t,Ta as r,Ua as s,W as g,X as c,Ya as v,Za as y,bb as f,cb as a,db as x,ta as l,wb as w}from"./chunk-5JI3WXRX.js";function z(i,o){if(i&1&&(t(0,"div",22)(1,"div",23),g(),t(2,"svg",24),s(3,"path",25),r(),c(),t(4,"p",26),a(5),r()()()),i&2){let n=y();l(5),x(n.errorMessage)}}function R(i,o){i&1&&(t(0,"p",27),a(1," Ge\xE7erli bir e-posta adresi girin "),r())}function V(i,o){i&1&&(t(0,"p",27),a(1," \u015Eifre en az 6 karakter olmal\u0131 "),r())}function A(i,o){i&1&&(t(0,"span"),a(1,"Giri\u015F Yap"),r())}function B(i,o){i&1&&(t(0,"span",23),g(),t(1,"svg",28),s(2,"circle",29)(3,"path",30),r(),a(4," Giri\u015F Yap\u0131l\u0131yor... "),r())}var T=class i{constructor(o,n,e,j){this.fb=o;this.authService=n;this.router=e;this.cdr=j;this.loginForm=this.fb.group({email:["",[u.required,u.email]],password:["",[u.required,u.minLength(6)]]})}loginForm;isLoading=!1;errorMessage="";onSubmit(){this.loginForm.valid&&(this.isLoading=!0,this.errorMessage="",this.authService.login(this.loginForm.value).pipe(b(()=>{this.isLoading=!1,this.cdr.detectChanges()})).subscribe({next:o=>{if(o.isSuccess)this.router.navigate(["/dashboard"]);else{let n=o.messages?.[0];this.errorMessage=n?.message||n?.propertyName||"Giri\u015F ba\u015Far\u0131s\u0131z",this.cdr.detectChanges()}},error:o=>{let n=o.error?.messages?.[0];this.errorMessage=n?.message||n?.propertyName||"E-posta veya \u015Fifre hatal\u0131",console.log("Error set:",this.errorMessage),this.cdr.detectChanges()}}))}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}static \u0275fac=function(n){return new(n||i)(m(N),m(E),m(C),m(w))};static \u0275cmp=h({type:i,selectors:[["app-login"]],decls:32,vars:11,consts:[[1,"min-h-screen","bg-gradient-to-br","from-blue-600","via-blue-700","to-purple-700","dark:from-gray-900","dark:via-gray-800","dark:to-gray-900","flex","items-center","justify-center","p-4"],[1,"bg-white","dark:bg-gray-800","rounded-2xl","shadow-2xl","w-full","max-w-md","p-8"],[1,"text-center","mb-8"],[1,"inline-flex","items-center","justify-center","w-16","h-16","bg-blue-600","rounded-full","mb-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-8","h-8","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"],[1,"text-3xl","font-bold","text-gray-800","dark:text-white"],[1,"text-gray-600","dark:text-gray-400","mt-2"],["class","mb-4 p-4 bg-red-50 dark:bg-red-900/30 border-l-4 border-red-500 rounded",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"mb-4"],[1,"block","text-gray-700","dark:text-gray-300","text-sm","font-semibold","mb-2"],["type","email","formControlName","email","placeholder","ornek@email.com",1,"w-full","px-4","py-3","border","border-gray-300","dark:border-gray-600","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition","bg-white","dark:bg-gray-700","text-gray-800","dark:text-white","placeholder-gray-400","dark:placeholder-gray-500"],["class","text-red-500 text-xs mt-1",4,"ngIf"],[1,"mb-6"],["type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","px-4","py-3","border","border-gray-300","dark:border-gray-600","rounded-lg","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition","bg-white","dark:bg-gray-700","text-gray-800","dark:text-white","placeholder-gray-400","dark:placeholder-gray-500"],["type","submit",1,"w-full","bg-blue-600","text-white","py-3","rounded-lg","font-semibold","hover:bg-blue-700","transition","disabled:bg-gray-400","disabled:cursor-not-allowed","flex","items-center","justify-center",3,"disabled"],[4,"ngIf"],["class","flex items-center",4,"ngIf"],[1,"mt-6","p-4","bg-gray-50","dark:bg-gray-700/50","rounded-lg"],[1,"text-xs","text-gray-600","dark:text-gray-400","font-semibold","mb-2"],[1,"text-xs","text-gray-500","dark:text-gray-400"],[1,"mb-4","p-4","bg-red-50","dark:bg-red-900/30","border-l-4","border-red-500","rounded"],[1,"flex","items-center"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-red-500","mr-2"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"text-red-700","dark:text-red-400","font-medium"],[1,"text-red-500","text-xs","mt-1"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(n,e){n&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),g(),t(4,"svg",4),s(5,"path",5),r()(),c(),t(6,"h2",6),a(7,"Ho\u015F Geldiniz"),r(),t(8,"p",7),a(9,"Shuttle Route Manager"),r()(),p(10,z,6,1,"div",8),t(11,"form",9),v("ngSubmit",function(){return e.onSubmit()}),t(12,"div",10)(13,"label",11),a(14," E-posta "),r(),s(15,"input",12),p(16,R,2,0,"p",13),r(),t(17,"div",14)(18,"label",11),a(19," \u015Eifre "),r(),s(20,"input",15),p(21,V,2,0,"p",13),r(),t(22,"button",16),p(23,A,2,0,"span",17)(24,B,5,0,"span",18),r()(),t(25,"div",19)(26,"p",20),a(27,"Test Hesab\u0131:"),r(),t(28,"p",21),a(29,"E-posta: admin@shuttle.com"),r(),t(30,"p",21),a(31,"\u015Eifre: Admin123!"),r()()()()),n&2&&(l(10),d("ngIf",e.errorMessage),l(),d("formGroup",e.loginForm),l(4),f("border-red-500",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),l(),d("ngIf",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),l(4),f("border-red-500",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),l(),d("ngIf",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),l(),d("disabled",e.loginForm.invalid||e.isLoading),l(),d("ngIf",!e.isLoading),l(),d("ngIf",e.isLoading))},dependencies:[k,S,D,M,L,_,F,G,I],encapsulation:2})};export{T as LoginComponent};
